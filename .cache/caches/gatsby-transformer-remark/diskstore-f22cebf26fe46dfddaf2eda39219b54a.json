{"expireTime":9007200863407791000,"key":"transformer-remark-markdown-ast-acf63626786657a8e5cca0be87df8834-gatsby-remark-relative-imagesgatsby-remark-katexgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-external-links-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"I still remember those days when Mobile Devs used to argue with the Backend teams regarding the unnecessary data coming in the APIs, and the reason is we used to create the General-Purpose API Backend which could be consumed by any of the clients(Web/Mobile) untill ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":267,"offset":267},"indent":[]}},{"type":"link","title":null,"url":"https://samnewman.io/patterns/architectural/bff/","children":[{"type":"text","value":"BFF (Backend for Frontend)","position":{"start":{"line":2,"column":268,"offset":268},"end":{"line":2,"column":294,"offset":294},"indent":[]}}],"position":{"start":{"line":2,"column":267,"offset":267},"end":{"line":2,"column":345,"offset":345},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" pattern was introduced by SoundCloud in 2015. But having BFF has its own caveats like, there is a high probability that each BFF may implement similar capabilities with different teams, easily doubling (or more) the cost of development and as we segment backends for each constituent frontend, the number of deployable units increases.","position":{"start":{"line":2,"column":345,"offset":345},"end":{"line":2,"column":681,"offset":681},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":681,"offset":681},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Does that mean GraphQL is going to replace BFF ?","position":{"start":{"line":4,"column":3,"offset":685},"end":{"line":4,"column":51,"offset":733},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":683},"end":{"line":4,"column":53,"offset":735},"indent":[]}},{"type":"text","value":". Well, some GraphQL literature insists that this new technology gives so much freedom to the client by allowing them to perform ad-hoc queries that you can safely have a single Backend without the drawbacks from REST-based approaches. You can take a look at this amazing ","position":{"start":{"line":4,"column":53,"offset":735},"end":{"line":4,"column":325,"offset":1007},"indent":[]}},{"type":"link","title":null,"url":"https://philcalcado.com/2019/07/12/some_thoughts_graphql_bff.html","children":[{"type":"text","value":"article","position":{"start":{"line":4,"column":326,"offset":1008},"end":{"line":4,"column":333,"offset":1015},"indent":[]}}],"position":{"start":{"line":4,"column":325,"offset":1007},"end":{"line":4,"column":401,"offset":1083},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" to get more insights of it.","position":{"start":{"line":4,"column":401,"offset":1083},"end":{"line":4,"column":429,"offset":1111},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":683},"end":{"line":4,"column":429,"offset":1111},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Well, there are tons of article which explain what GraphQL is and what are its advantages over REST ? but I would like to talk about the ones which I found really useful.","position":{"start":{"line":6,"column":1,"offset":1113},"end":{"line":6,"column":171,"offset":1283},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":1113},"end":{"line":6,"column":171,"offset":1283},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#avoid-under-and-over-fetching","title":null,"children":[],"data":{"hProperties":{"aria-label":"avoid under and over fetching permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Avoid under and over fetching","position":{"start":{"line":8,"column":3,"offset":1287},"end":{"line":8,"column":32,"offset":1316},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":1285},"end":{"line":8,"column":32,"offset":1316},"indent":[]},"data":{"id":"avoid-under-and-over-fetching","htmlAttributes":{"id":"avoid-under-and-over-fetching"},"hProperties":{"id":"avoid-under-and-over-fetching","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"The most powerful feature of graphql is to avoid the problem of under and over-fetching. Basically using GraphQL, we are shifiting the autonomy to the client to request the data as much as it requires ","position":{"start":{"line":10,"column":1,"offset":1318},"end":{"line":10,"column":202,"offset":1519},"indent":[]}},{"type":"strong","children":[{"type":"emphasis","children":[{"type":"text","value":"no more, no less","position":{"start":{"line":10,"column":205,"offset":1522},"end":{"line":10,"column":221,"offset":1538},"indent":[]}}],"position":{"start":{"line":10,"column":204,"offset":1521},"end":{"line":10,"column":222,"offset":1539},"indent":[]}}],"position":{"start":{"line":10,"column":202,"offset":1519},"end":{"line":10,"column":224,"offset":1541},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":10,"column":224,"offset":1541},"end":{"line":10,"column":225,"offset":1542},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":1318},"end":{"line":10,"column":225,"offset":1542},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So, in our case we were working on kind of social media application where we need to show the profile of other users including their images, and basic informations like (relationship status, abut myself etc). and we wanted it to be really blazing fast and with the traditional REST intuitive pattern, this would have required us at least two requests to two endpoints","position":{"start":{"line":12,"column":1,"offset":1544},"end":{"line":12,"column":368,"offset":1911},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":1544},"end":{"line":12,"column":368,"offset":1911},"indent":[]}},{"type":"html","lang":"javascript","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token constant\">GET</span> <span class=\"token operator\">/</span>api<span class=\"token operator\">/</span>users\n\n<span class=\"token constant\">GET</span> <span class=\"token operator\">/</span>api<span class=\"token operator\">/</span>users<span class=\"token operator\">/</span><span class=\"token number\">1</span><span class=\"token operator\">/</span>profile</code></pre></div>","position":{"start":{"line":14,"column":1,"offset":1913},"end":{"line":18,"column":4,"offset":1971},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"But, with GraphQL we can call this single API and prefetch all the data required.","position":{"start":{"line":19,"column":1,"offset":1972},"end":{"line":19,"column":82,"offset":2053},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1972},"end":{"line":19,"column":82,"offset":2053},"indent":[]}},{"type":"html","lang":"javascript","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">query users <span class=\"token punctuation\">{</span>\n id\n name\n avatars <span class=\"token punctuation\">{</span>\n\tisProfile<span class=\"token punctuation\">,</span>\n\turl\n <span class=\"token punctuation\">}</span>\n addresses <span class=\"token punctuation\">{</span>\n\ttype<span class=\"token punctuation\">,</span>\n\taddress\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":20,"column":1,"offset":2054},"end":{"line":33,"column":4,"offset":2160},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"So instead of multiple endpoints that return fixed data structures, a GraphQL server only exposes a single endpoint and responds with precisely the data a client requested.","position":{"start":{"line":34,"column":1,"offset":2161},"end":{"line":34,"column":173,"offset":2333},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":2161},"end":{"line":34,"column":173,"offset":2333},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#no-api-versioning","title":null,"children":[],"data":{"hProperties":{"aria-label":"no api versioning permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"No API Versioning","position":{"start":{"line":36,"column":3,"offset":2337},"end":{"line":36,"column":20,"offset":2354},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":2335},"end":{"line":36,"column":20,"offset":2354},"indent":[]},"data":{"id":"no-api-versioning","htmlAttributes":{"id":"no-api-versioning"},"hProperties":{"id":"no-api-versioning","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"While using REST, we version API’s when we make changes to the resources or to the structure of the resources we currently have and calling the different versions of an API often times results in weird responses. for example","position":{"start":{"line":38,"column":1,"offset":2356},"end":{"line":38,"column":225,"offset":2580},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":2356},"end":{"line":38,"column":225,"offset":2580},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">api.domain.com/v1/users\napi.domain.com/v2/users</code>","position":{"start":{"line":40,"column":1,"offset":2582},"end":{"line":43,"column":2,"offset":2633},"indent":[1,1,1]}}],"position":{"start":{"line":40,"column":1,"offset":2582},"end":{"line":43,"column":2,"offset":2633},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"But, in GraphQL, it is possible to deprecate API’s on a field level. When a particular field is to be deprecated, a client receives a deprecation warning when querying the field. After a while, the deprecated field may be removed from the schema when not many clients are using it anymore. Its too easy to deprecate a field if you are using ","position":{"start":{"line":45,"column":1,"offset":2635},"end":{"line":45,"column":342,"offset":2976},"indent":[]}},{"type":"link","title":null,"url":"https://www.apollographql.com","children":[{"type":"text","value":"apollo-server","position":{"start":{"line":45,"column":343,"offset":2977},"end":{"line":45,"column":356,"offset":2990},"indent":[]}}],"position":{"start":{"line":45,"column":342,"offset":2976},"end":{"line":45,"column":388,"offset":3022},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":".","position":{"start":{"line":45,"column":388,"offset":3022},"end":{"line":45,"column":389,"offset":3023},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":2635},"end":{"line":45,"column":389,"offset":3023},"indent":[]}},{"type":"html","lang":"javascript","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">type userGender <span class=\"token punctuation\">{</span>\n    id<span class=\"token operator\">:</span> Int<span class=\"token operator\">!</span>\n    name<span class=\"token operator\">:</span> String<span class=\"token operator\">!</span> @<span class=\"token function\">deprecated</span><span class=\"token punctuation\">(</span>reason<span class=\"token operator\">:</span> <span class=\"token string\">\"Not Required.\"</span><span class=\"token punctuation\">)</span>\n    createdAt<span class=\"token operator\">:</span> Date<span class=\"token operator\">!</span>\n    updatedAt<span class=\"token operator\">:</span> Date<span class=\"token operator\">!</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":47,"column":1,"offset":3025},"end":{"line":54,"column":4,"offset":3174},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"And in GraphQL Playground, it will show the warning","position":{"start":{"line":55,"column":1,"offset":3175},"end":{"line":55,"column":52,"offset":3226},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":3175},"end":{"line":55,"column":52,"offset":3226},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/field-deprecation.png","alt":"alt","position":{"start":{"line":57,"column":1,"offset":3228},"end":{"line":57,"column":31,"offset":3258},"indent":[]}},{"type":"text","value":" \nAs a result, instead of completely versioning the API, it is possible to gradually evolve the API over time without having to restructure the entire API schema.","position":{"start":{"line":57,"column":31,"offset":3258},"end":{"line":58,"column":161,"offset":3420},"indent":[1]}}],"position":{"start":{"line":57,"column":1,"offset":3228},"end":{"line":58,"column":161,"offset":3420},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Also, adding new fields has no effect on any current clients because you only get the fields you request.","position":{"start":{"line":60,"column":1,"offset":3422},"end":{"line":60,"column":106,"offset":3527},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":3422},"end":{"line":60,"column":106,"offset":3527},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#introspectable","title":null,"children":[],"data":{"hProperties":{"aria-label":"introspectable permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Introspectable","position":{"start":{"line":61,"column":3,"offset":3530},"end":{"line":61,"column":17,"offset":3544},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":3528},"end":{"line":61,"column":17,"offset":3544},"indent":[]},"data":{"id":"introspectable","htmlAttributes":{"id":"introspectable"},"hProperties":{"id":"introspectable","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"For REST APIs, we need to use tools like Swagger to document the APIs but, GraphQL comes with its own inbuilt Playground, using which you can see your defined schema, It’s possible to query any GraphQL API to ask it about itself. Every compliant server has a ","position":{"start":{"line":63,"column":1,"offset":3546},"end":{"line":63,"column":260,"offset":3805},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">__schema</code>","position":{"start":{"line":63,"column":260,"offset":3805},"end":{"line":63,"column":270,"offset":3815},"indent":[]}},{"type":"text","value":" field which will allow you to retrieve information about the available fields and types. You can create your query, mutation, subscription etc all out there and see the results.","position":{"start":{"line":63,"column":270,"offset":3815},"end":{"line":63,"column":448,"offset":3993},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":3546},"end":{"line":63,"column":448,"offset":3993},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#schema-stiching","title":null,"children":[],"data":{"hProperties":{"aria-label":"schema stiching permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Schema Stiching","position":{"start":{"line":65,"column":3,"offset":3997},"end":{"line":65,"column":18,"offset":4012},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":3995},"end":{"line":65,"column":18,"offset":4012},"indent":[]},"data":{"id":"schema-stiching","htmlAttributes":{"id":"schema-stiching"},"hProperties":{"id":"schema-stiching","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"So, this particular feature, I haven’t got a chance to use it but this feature really embraces the Microservices Archietecture. Here, the backend would be broken down into multiple microservices with distinct functionalities. As a result, each microservice can define its own GraphQL schema.","position":{"start":{"line":67,"column":1,"offset":4014},"end":{"line":67,"column":292,"offset":4305},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":4014},"end":{"line":67,"column":292,"offset":4305},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Afterward, you could use schema stitching to weave all individual schemas into one general schema which can then be accessed by each of the client applications. In the end, each microservice can have its own GraphQL endpoint whereas one GraphQL API gateway consolidates all schemas into one global schema to make it available to the client applications.","position":{"start":{"line":69,"column":1,"offset":4307},"end":{"line":69,"column":354,"offset":4660},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":4307},"end":{"line":69,"column":354,"offset":4660},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can take an in-depth look at GraphQL ","position":{"start":{"line":71,"column":1,"offset":4662},"end":{"line":71,"column":42,"offset":4703},"indent":[]}},{"type":"link","title":null,"url":"https://www.apollographql.com/blog/graphql-schema-stitching-8af23354ac37/","children":[{"type":"text","value":"Schema Stitching by Sashko Stubailo","position":{"start":{"line":71,"column":43,"offset":4704},"end":{"line":71,"column":78,"offset":4739},"indent":[]}}],"position":{"start":{"line":71,"column":42,"offset":4703},"end":{"line":71,"column":154,"offset":4815},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" to get a deeper understanding of the concepts involved.","position":{"start":{"line":71,"column":154,"offset":4815},"end":{"line":71,"column":210,"offset":4871},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":4662},"end":{"line":71,"column":210,"offset":4871},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So, I have only mentioned the features which I have used and explored but there are lot more remaining and I would love to pen them down here as I use them.","position":{"start":{"line":73,"column":1,"offset":4873},"end":{"line":73,"column":157,"offset":5029},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":4873},"end":{"line":73,"column":157,"offset":5029},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#a-big-but","title":null,"children":[],"data":{"hProperties":{"aria-label":"a big but permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"A Big “But”","position":{"start":{"line":75,"column":3,"offset":5033},"end":{"line":75,"column":14,"offset":5044},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":5031},"end":{"line":75,"column":14,"offset":5044},"indent":[]},"data":{"id":"a-big-but","htmlAttributes":{"id":"a-big-but"},"hProperties":{"id":"a-big-but","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"So, the above features which I have mentioned don’t come for free. Remember? what Uncle Ben said to Peter Parker ","position":{"start":{"line":77,"column":1,"offset":5046},"end":{"line":77,"column":114,"offset":5159},"indent":[]}},{"type":"strong","children":[{"type":"emphasis","children":[{"type":"text","value":"With great power comes great responsibility","position":{"start":{"line":77,"column":117,"offset":5162},"end":{"line":77,"column":160,"offset":5205},"indent":[]}}],"position":{"start":{"line":77,"column":116,"offset":5161},"end":{"line":77,"column":161,"offset":5206},"indent":[]}}],"position":{"start":{"line":77,"column":114,"offset":5159},"end":{"line":77,"column":163,"offset":5208},"indent":[]}},{"type":"text","value":". And here the onus is on the developers, to keep a keen eye on the problems mentioned below.","position":{"start":{"line":77,"column":163,"offset":5208},"end":{"line":77,"column":256,"offset":5301},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":5046},"end":{"line":77,"column":256,"offset":5301},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#n1-problem","title":null,"children":[],"data":{"hProperties":{"aria-label":"n1 problem permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"(N+1) Problem","position":{"start":{"line":79,"column":3,"offset":5305},"end":{"line":79,"column":16,"offset":5318},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":5303},"end":{"line":79,"column":16,"offset":5318},"indent":[]},"data":{"id":"n1-problem","htmlAttributes":{"id":"n1-problem"},"hProperties":{"id":"n1-problem","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"The one big gotcha with the GraphQL is (N+1) DB hits, So lets say we have schema like this","position":{"start":{"line":81,"column":1,"offset":5320},"end":{"line":81,"column":91,"offset":5410},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":5320},"end":{"line":81,"column":91,"offset":5410},"indent":[]}},{"type":"html","lang":"java","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">This</span> is where the name comes from<span class=\"token punctuation\">,</span> by the way<span class=\"token punctuation\">.</span> <span class=\"token class-name\">We</span> will always make <span class=\"token number\">1</span> initial query <span class=\"token keyword\">to</span> the DB and <span class=\"token keyword\">return</span> <span class=\"token class-name\">N</span> results<span class=\"token punctuation\">,</span> which means we will have <span class=\"token keyword\">to</span> make <span class=\"token class-name\">N</span> additional DB queries<span class=\"token punctuation\">.</span> <span class=\"token class-name\">Now</span> <span class=\"token keyword\">this</span> is an intrinsic problem <span class=\"token keyword\">with</span> the <span class=\"token class-name\">GraphQL</span> and <span class=\"token keyword\">to</span> solve <span class=\"token keyword\">this</span> there’s a really handy tool that came out right alongside <span class=\"token class-name\">GraphQL</span> called <span class=\"token class-name\">DataLoader</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">Dataloader</span> essentially wait <span class=\"token keyword\">for</span> all your resolvers <span class=\"token keyword\">to</span> load in their individual keys<span class=\"token punctuation\">.</span> <span class=\"token class-name\">Once</span> it has them<span class=\"token punctuation\">,</span> it hits the DB once <span class=\"token keyword\">with</span> the keys<span class=\"token punctuation\">,</span> and returns a promise that resolves an array of the values<span class=\"token punctuation\">.</span> <span class=\"token class-name\">It</span> batches our queries instead of making one at a time<span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">And</span> <span class=\"token class-name\">I</span> have used it extensively in my current project<span class=\"token punctuation\">,</span> will have a separate blog <span class=\"token keyword\">for</span> the same<span class=\"token punctuation\">.</span>\n\n##<span class=\"token class-name\">Caching</span>\n\n<span class=\"token class-name\">The</span> goal of caching an API response is primarily <span class=\"token keyword\">to</span> obtain the response from future requests faster<span class=\"token punctuation\">.</span> <span class=\"token class-name\">Unlike</span> <span class=\"token class-name\">GraphQL</span><span class=\"token punctuation\">,</span> caching is built into in the HTTP specification which <span class=\"token class-name\">RESTful</span> <span class=\"token class-name\">APIs</span> are able <span class=\"token keyword\">to</span> leverage<span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">With</span> REST we access resources <span class=\"token keyword\">with</span> the <span class=\"token class-name\">URLs</span><span class=\"token punctuation\">,</span> and thus we would be able <span class=\"token keyword\">to</span> cache on a resource level because we have the resource URL as an identifier<span class=\"token punctuation\">.</span> <span class=\"token class-name\">In</span> <span class=\"token class-name\">GraphQL</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span> becomes complex as each query can be different even though it operates on the same entity<span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">For</span> example in one query we might be interested in just the name of a <span class=\"token class-name\">User</span><span class=\"token punctuation\">,</span> however<span class=\"token punctuation\">,</span> in the next query you might want their addresses<span class=\"token punctuation\">,</span> images etc<span class=\"token punctuation\">.</span> <span class=\"token class-name\">This</span> is the point where caching is mostly complex as it will require field level caching which is not an easy thing <span class=\"token keyword\">to</span> achieve <span class=\"token keyword\">with</span> <span class=\"token class-name\">GraphQL</span> since it <span class=\"token keyword\">uses</span> a single endpoint<span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">We</span> could use libraries like <span class=\"token class-name\">Dataloaders</span> <span class=\"token keyword\">to</span> achieve <span class=\"token class-name\">Caching</span> at the <span class=\"token class-name\">Backend</span> but<span class=\"token punctuation\">,</span> still on the client sides <span class=\"token keyword\">this</span> would be really tricky<span class=\"token punctuation\">.</span>\n\n##<span class=\"token class-name\">Freedoom</span> <span class=\"token keyword\">to</span> the <span class=\"token class-name\">Clients</span> could be dangerous\n\n<span class=\"token class-name\">GraphQL</span> <span class=\"token keyword\">provides</span> autonomy <span class=\"token keyword\">to</span> the clients <span class=\"token keyword\">to</span> execute queries <span class=\"token keyword\">to</span> get exactly what they need<span class=\"token punctuation\">.</span> <span class=\"token class-name\">This</span> is an amazing feature however<span class=\"token punctuation\">,</span> it could be a bit controversial as it could also mean that users can ask <span class=\"token keyword\">for</span> as many fields in as many resources as they want<span class=\"token punctuation\">.</span> <span class=\"token keyword\">for</span> example\n\ncode\n\n<span class=\"token class-name\">This</span> query could potentially get tens of thousands of data in response and could even kill your server<span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">Therefore</span><span class=\"token punctuation\">,</span> as much as it is a good thing <span class=\"token keyword\">to</span> allow users <span class=\"token keyword\">to</span> request <span class=\"token keyword\">for</span> whatever they need<span class=\"token punctuation\">,</span> at certain levels of complexity<span class=\"token punctuation\">,</span> requests like <span class=\"token keyword\">this</span> can slow down performs and immensely affect the efficiency of <span class=\"token class-name\">GraphQL</span> applications<span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">To</span> avoid the mentioned problem<span class=\"token punctuation\">,</span> we can configue the <span class=\"token class-name\">Maximum</span> <span class=\"token class-name\">Query</span> <span class=\"token class-name\">Depth</span> using which we could prevent the clients from abusing query depth like <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span> <span class=\"token class-name\">Do</span> read the amazing article <span class=\"token keyword\">to</span> get <span class=\"token keyword\">to</span> know about the few strategies <span class=\"token keyword\">to</span> mitigate these types of risks<span class=\"token punctuation\">.</span>\n\n##<span class=\"token class-name\">Duplication</span> of <span class=\"token class-name\">Schemas</span>\n\n<span class=\"token class-name\">When</span> building <span class=\"token keyword\">with</span> <span class=\"token class-name\">GraphQL</span> on the backend<span class=\"token punctuation\">,</span> you would have some duplication and code repetition especially when it comes <span class=\"token keyword\">to</span> schemas<span class=\"token punctuation\">.</span> <span class=\"token class-name\">First</span><span class=\"token punctuation\">,</span> you need a schema <span class=\"token keyword\">for</span> your <span class=\"token function\">database</span><span class=\"token punctuation\">(</span>data models<span class=\"token punctuation\">)</span> and another <span class=\"token keyword\">for</span> your <span class=\"token class-name\">GraphQL</span> endpoint<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span> involves similar but<span class=\"token punctuation\">,</span> not quite identical code<span class=\"token punctuation\">,</span> especially when it comes <span class=\"token keyword\">to</span> schemas<span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">It</span> is really difficult that you have <span class=\"token keyword\">to</span> write very similar code <span class=\"token keyword\">for</span> your schemas and data models<span class=\"token punctuation\">,</span> but it's even more frustrating that you also have <span class=\"token keyword\">to</span> continually keep them in sync<span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">Apparently</span><span class=\"token punctuation\">,</span> efforts have been made in the <span class=\"token class-name\">GraphQL</span> community <span class=\"token keyword\">to</span> fix it<span class=\"token punctuation\">.</span> <span class=\"token class-name\">PostGraphile</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Prisma</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Hasura</span> etc<span class=\"token punctuation\">.</span> these tools generates a <span class=\"token class-name\">GraphQL</span> schema from your database schema<span class=\"token punctuation\">.</span>\n\n##<span class=\"token class-name\">Conclusion</span>\n\n<span class=\"token class-name\">The</span> conclusion <span class=\"token class-name\">I</span> arrived at when writing my <span class=\"token class-name\">GraphQL</span> server was that <span class=\"token class-name\">GraphQL</span> is not the elixir <span class=\"token class-name\">I</span> thought it was<span class=\"token punctuation\">.</span> <span class=\"token class-name\">Though</span><span class=\"token punctuation\">,</span> all the features it advertised sounded incredible<span class=\"token punctuation\">.</span>\n<span class=\"token class-name\">Learning</span> the schema language of <span class=\"token class-name\">GraphQL</span> was not difficult<span class=\"token punctuation\">.</span> <span class=\"token class-name\">Once</span> you learn about schemas<span class=\"token punctuation\">,</span> resolvers<span class=\"token punctuation\">,</span> object types<span class=\"token punctuation\">,</span> query and mutation you are ready <span class=\"token keyword\">to</span> write your <span class=\"token class-name\">GraphQL</span> server<span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">The</span> only major problem <span class=\"token class-name\">I</span> see <span class=\"token keyword\">with</span> <span class=\"token class-name\">GraphQL</span> is <span class=\"token punctuation\">(</span><span class=\"token class-name\">N</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">DB</span> hits<span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span> which <span class=\"token class-name\">Dataloaders</span> was introduced <span class=\"token keyword\">to</span> resque but<span class=\"token punctuation\">,</span> coming from the REST background sometimes<span class=\"token punctuation\">,</span> <span class=\"token class-name\">I</span> get confused <span class=\"token keyword\">while</span> writing the <span class=\"token class-name\">GraphQL</span> schemas say <span class=\"token keyword\">for</span> example\n\n<span class=\"token class-name\">So</span><span class=\"token punctuation\">,</span> here either <span class=\"token class-name\">I</span> can define options as a field resolver and use <span class=\"token class-name\">Dataloader</span> or get the entire data in a single query using joins which more sounds like a REST<span class=\"token punctuation\">.</span> <span class=\"token class-name\">So</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">In</span> order <span class=\"token keyword\">to</span> decide <span class=\"token class-name\">I</span> think of the clients who are going <span class=\"token keyword\">to</span> use these <span class=\"token class-name\">APIs</span><span class=\"token punctuation\">.</span> <span class=\"token class-name\">I</span> would not use <span class=\"token class-name\">GraphQL</span> in a simple application <span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span> example<span class=\"token punctuation\">,</span> one that <span class=\"token keyword\">uses</span> a few fields in the same way<span class=\"token punctuation\">,</span> every time<span class=\"token punctuation\">)</span> as it would add more complexity<span class=\"token punctuation\">.</span> but <span class=\"token keyword\">if</span> <span class=\"token class-name\">I</span> would have various clients<span class=\"token punctuation\">,</span> <span class=\"token keyword\">with</span> different data requirements<span class=\"token punctuation\">,</span> <span class=\"token class-name\">I</span> would use <span class=\"token class-name\">GraphQL</span> without a doubt<span class=\"token punctuation\">.</span></code></pre></div>","position":{"start":{"line":82,"column":1,"offset":5411},"end":{"line":128,"column":1,"offset":9716},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":128,"column":1,"offset":9716}}}}