<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.549c9b10e07d0224f71c.css">html{font-size:100}body{margin:0 0 0 calc(100vw - 100%);color:#222;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{max-width:100%;margin:inherit auto}hr,img{border:0;display:block}hr{color:#222;height:1.625rem;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#222 0,#222 15px,transparent 0,transparent 26px);width:6.25rem}a{color:#5d93ff;text-decoration:none}a:active,a:focus,a:hover{color:#f7a046}b,strong{font-weight:600}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#222;font-size:.875rem;font-style:italic;margin-bottom:0;text-align:center}.anchor{margin-left:-1.875rem!important;padding-right:.875rem!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.Author-module--author__photo--36xCH{display:inline-block;margin-bottom:0;border-radius:50%;background-clip:padding-box}.Author-module--author__title--2CaTb{font-size:1.125rem;font-weight:600;line-height:1.82813rem;margin:.8125rem 0}.Author-module--author__title-link--Yrism,.Author-module--author__title-link--Yrism:focus,.Author-module--author__title-link--Yrism:hover{color:#222}.Author-module--author__subtitle--cAaEB{color:#888;line-height:1.625rem;margin-bottom:1.625rem}.Icon-module--icon--Gpyvw{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor;font-style:normal;font-weight:400;speak:none;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Contacts-module--contacts--1rGd1{margin-bottom:1.625rem}.Contacts-module--contacts__list--3OgdW{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;padding:0;margin:.625rem -.1875rem;width:8.75rem}.Contacts-module--contacts__list-item--16p9q{padding:0;margin:.25rem;display:flex;align-content:center;align-items:center;justify-content:center;height:2.1875rem;width:2.1875rem;line-height:2.1875rem;border-radius:50%;text-align:center;border:1px solid #ebebeb}.Contacts-module--contacts__list-item-link--2MIDn{border:0;display:flex;color:#222}.Contacts-module--contacts__list-item-link--2MIDn:focus,.Contacts-module--contacts__list-item-link--2MIDn:hover{color:#5d93ff}.Copyright-module--copyright--1ariN{color:#b6b6b6;font-size:.875rem}.Menu-module--menu--Efbin{margin-bottom:1.625rem}.Menu-module--menu__list--31Zeo{list-style:none;padding:0;margin:0}.Menu-module--menu__list-item--1lJ6B{padding:0;margin:.625rem 0}.Menu-module--menu__list-item-link--10Ush{font-size:1rem;color:#222;font-weight:400;border:0}.Menu-module--menu__list-item-link--10Ush:focus,.Menu-module--menu__list-item-link--10Ush:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Menu-module--menu__list-item-link--active--2CbUO{color:#222;border-bottom:1px solid #222}.Sidebar-module--sidebar--X4z2p{width:100%}.Sidebar-module--sidebar__inner--Jdc5s{position:relative;padding:1.5625rem 1.25rem 0}@media screen and (min-width:685px){.Sidebar-module--sidebar--X4z2p{width:calc(41.625% - 1.09375rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(12n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(12n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:1.875rem 1.25rem 0}.Sidebar-module--sidebar__inner--Jdc5s:after{background:#e6e6e6;background:linear-gradient(180deg,#e6e6e6 0,#e6e6e6 48%,#fff);position:absolute;content:"";width:.0625rem;height:33.75rem;top:30px;right:-10px;bottom:0}}@media screen and (min-width:960px){.Sidebar-module--sidebar--X4z2p{width:calc(33.3% - 1.25rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(3n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(3n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:2.5rem}}.Category-module--cate--1mxIM{margin-bottom:1.625rem}.Category-module--cate__item--3El_b{margin-bottom:2.03125rem}.Category-module--cate__item--3El_b:last-child{margin-bottom:.8125rem}.Category-module--cate__item-title--2pnmg{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.Category-module--cate__item-title-link--1NEnc{color:#222}.Category-module--cate__item-title-link--1NEnc:focus,.Category-module--cate__item-title-link--1NEnc:hover{color:#222;border-bottom:1px solid #222}.Category-module--cate__item-description--2FigF{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.Category-module--cate__item-meta-time--37LfJ{font-size:.875rem;color:#222;font-weight:600;text-transform:uppercase}.Category-module--cate__item-meta-divider--3BiBg{margin:0 .3125rem}.Category-module--cate__item-meta-category-link--1tp8g{font-size:.875rem;color:#f7a046;font-weight:600;text-transform:uppercase}.Category-module--cate__item-meta-category-link--1tp8g:focus,.Category-module--cate__item-meta-category-link--1tp8g:hover{color:#5d93ff}.Category-module--cate__item-readmore--L067A{font-size:1rem;color:#5d93ff}.Category-module--cate__item-readmore--L067A:focus,.Category-module--cate__item-readmore--L067A:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Layout-module--layout--3Pyz6{max-width:66.875rem;margin-left:auto;margin-right:auto}.Layout-module--layout--3Pyz6:before{content:"";display:table}.Layout-module--layout--3Pyz6:after{content:"";display:table;clear:both}.Feed-module--feed__item--2D5rE{margin-bottom:2.03125rem}.Feed-module--feed__item--2D5rE:last-child{margin-bottom:.8125rem}.Feed-module--feed__item-title--3nigr{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.Feed-module--feed__item-title-link--iFMRs{color:#222}.Feed-module--feed__item-title-link--iFMRs:focus,.Feed-module--feed__item-title-link--iFMRs:hover{color:#222;border-bottom:1px solid #222}.Feed-module--feed__item-description--1uO8e{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.Feed-module--feed__item-meta-time--3t1fg{font-size:.875rem;color:#222;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-divider--N-Q0A{margin:0 .3125rem}.Feed-module--feed__item-meta-category-link--23f8F{font-size:.875rem;color:#f7a046;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-category-link--23f8F:focus,.Feed-module--feed__item-meta-category-link--23f8F:hover{color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI{font-size:1rem;color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI:focus,.Feed-module--feed__item-readmore--1u6bI:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Page-module--page--2nMky{margin-bottom:3.25rem}.Page-module--page__inner--2M_vz{padding:1.5625rem 1.25rem}.Page-module--page__title--GPD8L{font-size:2.5rem;font-weight:600;line-height:3.25rem;margin-top:0;margin-bottom:2.35625rem}.Page-module--page__body--Ic6i6{font-size:1rem;line-height:1.625rem;margin:0 0 1.625rem}@media screen and (min-width:685px){.Page-module--page--2nMky{width:calc(58.275% - .78125rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(12n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(12n+1){clear:both}.Page-module--page__inner--2M_vz{padding:1.875rem 1.25rem}}@media screen and (min-width:960px){.Page-module--page--2nMky{width:calc(66.6% - .625rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(3n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(3n+1){clear:both}.Page-module--page__inner--2M_vz{padding:2.5rem 2.1875rem}}.Pagination-module--pagination--2H3nO{margin-top:3.25rem;display:flex}.Pagination-module--pagination__prev--bet5s{width:50%;text-align:left}.Pagination-module--pagination__prev-link--1Nzs6{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__prev-link--1Nzs6:focus,.Pagination-module--pagination__prev-link--1Nzs6:hover{color:#5d93ff}.Pagination-module--pagination__prev-link--disable--Yklx9{pointer-events:none;color:#bbb}.Pagination-module--pagination__next--3hFiN{width:50%;text-align:right}.Pagination-module--pagination__next-link--3FUtA{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__next-link--3FUtA:focus,.Pagination-module--pagination__next-link--3FUtA:hover{color:#5d93ff}.Pagination-module--pagination__next-link--disable--30UwZ{pointer-events:none;color:#bbb}.Author-module--author--2Yefr{border-top:1px solid #e6e6e6;max-width:40rem;padding-top:1.25rem;line-height:1.625rem;margin-top:1.625rem;margin-bottom:3.25rem}.Author-module--author__bio-twitter--n-O9n{display:block;text-decoration:underline}@media screen and (min-width:685px){.Author-module--author--2Yefr{margin-left:auto;margin-right:auto}}.Content-module--content--3p512{max-width:59.0625rem;padding:0 .9375rem;margin:0 auto}.Content-module--content__title--2BDW9{font-size:2rem;max-width:40rem;font-weight:600;text-align:center;line-height:2.68125rem;margin:1.625rem auto 0}.Content-module--content__body--2TrQ- figure{margin-bottom:1.625rem}.Content-module--content__body--2TrQ- figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.Content-module--content__body--2TrQ- figure blockquote p{max-width:40rem;font-size:1.6817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.Content-module--content__body--2TrQ- a{text-decoration:underline}.Content-module--content__body--2TrQ- *{max-width:40rem;margin-left:auto;margin-right:auto}.Content-module--content__body--2TrQ- img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--3p512{padding:0}.Content-module--content__title--2BDW9{font-size:3rem;line-height:3.65625rem;margin-top:3.65625rem;margin-bottom:2.4375rem}.Content-module--content__body--2TrQ-,.Content-module--content__body--2TrQ- p{font-size:1.125rem;line-height:1.82813rem;margin-bottom:1.82813rem}}.Meta-module--meta__date--29eD7{font-style:italic}.Tags-module--tags--1L_ct{margin-bottom:.8125rem}.Tags-module--tags__list--91FqN{list-style:none;margin:0 -.625rem;padding:0}.Tags-module--tags__list-item--1M30P{display:inline-block;margin:.625rem .3125rem}.Tags-module--tags__list-item-link--3SL_8{display:inline-block;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;border:1px solid #e6e6e6;text-decoration:none;border-radius:1.25rem;color:#222}.Tags-module--tags__list-item-link--3SL_8:focus,.Tags-module--tags__list-item-link--3SL_8:hover{color:#5d93ff}.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{max-width:40rem;margin:0 auto;padding:0 .9375rem}.Post-module--post__home-button--16Kl0{display:block;max-width:5.625rem;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;text-align:center;color:#222;border:1px solid #e6e6e6;border-radius:1.25rem;font-size:1rem;font-weight:400;margin-left:auto;margin-right:auto;margin-top:1.625rem}.Post-module--post__home-button--16Kl0:focus,.Post-module--post__home-button--16Kl0:hover{color:#5d93ff}@media screen and (min-width:960px){.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{padding:0}.Post-module--post__home-button--16Kl0{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}</style><meta name="generator" content="Gatsby 2.23.1"/><link rel="alternate" type="application/rss+xml" title="Tech Blog by Murtaza Bagwala" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-73379983-2"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-73379983-2', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=f587e5c9996b3040991de7890e315798"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#F7A046"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=f587e5c9996b3040991de7890e315798"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=f587e5c9996b3040991de7890e315798"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=f587e5c9996b3040991de7890e315798"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=f587e5c9996b3040991de7890e315798"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=f587e5c9996b3040991de7890e315798"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=f587e5c9996b3040991de7890e315798"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=f587e5c9996b3040991de7890e315798"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=f587e5c9996b3040991de7890e315798"/><title data-react-helmet="true">Normalizing Redux state to ensure good performance in React apps - Tech Blog by Murtaza Bagwala</title><meta data-react-helmet="true" name="description" content="In complex applications, client apps have to store and manage a large amount of nested data, and if the data is not normalized, it can be incredibly time-consuming for a program to lookup nested data which could become a performance concern."/><meta data-react-helmet="true" property="og:site_name" content="Normalizing Redux state to ensure good performance in React apps - Tech Blog by Murtaza Bagwala"/><meta data-react-helmet="true" property="og:image" content="https://lumen.netlify.com/murtaza.jpeg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Normalizing Redux state to ensure good performance in React apps - Tech Blog by Murtaza Bagwala"/><meta data-react-helmet="true" name="twitter:description" content="In complex applications, client apps have to store and manage a large amount of nested data, and if the data is not normalized, it can be incredibly time-consuming for a program to lookup nested data which could become a performance concern."/><meta data-react-helmet="true" name="twitter:image" content="https://lumen.netlify.com/murtaza.jpeg"/><link as="script" rel="preload" href="/webpack-runtime-bcaa39fce28708816bcb.js"/><link as="script" rel="preload" href="/framework-6e11d4e07218876eea4b.js"/><link as="script" rel="preload" href="/532a2f07-0bdce019e7334bf580d8.js"/><link as="script" rel="preload" href="/app-0dfd1edc0224713f60bf.js"/><link as="script" rel="preload" href="/styles-9b6f388623a2ec93d35f.js"/><link as="script" rel="preload" href="/cd95ea5cbd2c605f26db819f07999610c9ff4310-0415b0ed48b1428b3054.js"/><link as="script" rel="preload" href="/643651a62fb35a9bb4f20061cb1f214a352d7976-80fc3dca2e05b06d2460.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-2078a538ecd479eb4c85.js"/><link as="fetch" rel="preload" href="/page-data/posts/redux-state-normalization/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--layout--3Pyz6"><div><a class="Post-module--post__home-button--16Kl0" href="/">All Articles</a><div><div class="Content-module--content--3p512"><h1 class="Content-module--content__title--2BDW9">Normalizing Redux state to ensure good performance in React apps</h1><div class="Content-module--content__body--2TrQ-"><p><strong>Normalization</strong> is the process of efficiently organizing data.
In the case of the backend, we generally store the data in the database
and apply some normalization techniques to eliminate redundant data
(for example, storing the same data in more than one table)
and ensuring data dependencies make sense (only storing related data in a table).</p>
<p>Traditionally, client-side applications were only used to show
the data coming from the backend with minimal business logic.
But with the advent of SPA and various libraries around it like
<a href="https://reactjs.org/" target="_blank" rel="nofollow noopener noreferrer">React</a>
and
<a href="https://vuejs.org/" target="_blank" rel="nofollow noopener noreferrer">Vue</a>
etc., client applications have now evolved, have become more complex and,
now they are capable of managing the data as well.
So, to store and manage the data,
we use some state management tools like
<a href="https://redux.js.org/" target="_blank" rel="nofollow noopener noreferrer">Redux</a>.</p>
<p>The idea of Redux is simple: the whole state of the application
is contained in one central location. We need to define Action Types/Creators,
Pure Reducers, and Store that is it.</p>
<p>Before getting into the <strong>Normalization</strong>, let us see how data flows in Redux.</p>
<p><img src="/redux-async-data-flow.gif" alt="alt"></p>
<p><a href="https://redux.js.org/tutorials/fundamentals/part-6-async-logic#redux-async-data-flow" target="_blank" rel="nofollow noopener noreferrer">Image Credit</a></p>
<p>The work done by Redux generally falls into two major areas:</p>
<ol>
<li>Processing actions in middleware(calling an API).</li>
<li>Calling the Reducers to update the state (including object duplication for immutable updates).</li>
</ol>
<p>It is certainly possible for each of these to become a performance concern
in complex situations.
We can increase the performance by improving the state shape.</p>
<p>Let us understand how denormalized state shape could be a performance bottleneck.
Suppose we are building an online Chat room.
Here our data would be nested in nature.
For example, each Chat room has multiple users and,
each user would belong to multiple Chat rooms.
Data for this kind of application might look like:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> chatRooms <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'chatRoom1'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'general'</span><span class="token punctuation">,</span>
    users<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'user1'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'John'</span>
        belongToRooms<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom1'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'general'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom2'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'random'</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'user2'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'Smith'</span>
        belongToRooms<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom1'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'general'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom2'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'random'</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'chatRoom2'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'random'</span><span class="token punctuation">,</span>
    users<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'user1'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'John'</span>
        belongToRooms<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom1'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'general'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom2'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'random'</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'user2'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'Smith'</span>
        belongToRooms<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom1'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'general'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom2'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'random'</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre></div>
<p>The structure of this data is a bit complex, and some of the data is repeated.
Let us see, how our reducer would look like if we need to delete/update the particular Chat room.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">case</span> <span class="token constant">DELETE_CHAT_ROOM</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> roomId <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span> 
      <span class="token keyword">const</span> <span class="token punctuation">{</span> chatRooms <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>

      <span class="token keyword">const</span> indexOfChatRoomToBeDeleted <span class="token operator">=</span> chatRooms<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">chatRoom</span> <span class="token operator">=></span> chatRoom<span class="token punctuation">.</span>id <span class="token operator">===</span> roomId<span class="token punctuation">)</span>

      <span class="token comment">// Delete Chat room</span>

      chatRooms<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>indexOfChatRoomToBeDeleted<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


       <span class="token comment">// Delete Chat room from the users</span>

      chatRooms<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">chatRoom</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        chatRoom<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          
          <span class="token keyword">const</span> index <span class="token operator">=</span> 
            user<span class="token punctuation">.</span>belongToRooms<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">chatRoom</span> <span class="token operator">=></span> chatRoom<span class="token punctuation">.</span>id <span class="token operator">===</span> roomId<span class="token punctuation">)</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            user<span class="token punctuation">.</span>belongToRooms<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong><em>Note: Redux does not allow to mutate the old state so, to avoid the duplication complexity and for the example purpose, we are mutating the state directly.</em></strong></p>
<p>That is why unnormalized data is a concern for several reasons:</p>
<ul>
<li>When we have duplicated data in several places,
it becomes harder to make sure it is updated appropriately.</li>
<li>When we have nested structures, we need to create complex reducers
which would parse the entire state tree to update the single field.</li>
<li>An update to a deeply nested data object could force unrelated UI components
to re-render even if the data did not change.</li>
</ul>
<p>So, to avoid all of the above issues, Normalization comes to the rescue.
It is a similar technique to what we generally do at the database level.</p>
<ul>
<li>Creating a separate table for each entity, whereas in the Redux store
we would treat all the entities as separate slices of a state
and create separate reducers for each of them.</li>
<li>We have primary keys on the data table,
whereas in the Redux store we store the individual entities in an object,
with the IDs of the entities as keys and the entities themselves as the values.</li>
<li>At the database level, we store the references as IDs,
similarly here in Redux store references to individual entities
should be done by storing the ID only.</li>
</ul>
<p>As we are treating the Redux store like a database,
many of the principles of database design apply here as well.
For example, in our case Chat room and the user have a many-to-many relationship,
we can model that using an intermediate entity called as chatRoomUser
that stores the IDs of the Chat room and User entities.</p>
<p>So, after normalization our slices of state
and their corresponding reducers would look like:-</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> chatRooms <span class="token operator">=</span> <span class="token punctuation">{</span>
  byId<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'chatRoom1'</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom1'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'general'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'chatRoom2'</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoom2'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'random'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token punctuation">{</span>
  byId<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'user1'</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'user1'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'user2'</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'user2'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Smith'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> chatRoomUsers <span class="token operator">=</span> <span class="token punctuation">{</span>
  byId<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'chatRoomUser1'</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoomUser1'</span><span class="token punctuation">,</span> chatRoomId<span class="token operator">:</span> <span class="token string">'chatRoom1'</span><span class="token punctuation">,</span> userId<span class="token operator">:</span> <span class="token string">'user1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'chatRoomUser2'</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'chatRoomUser2'</span><span class="token punctuation">,</span> chatRoomId<span class="token operator">:</span> <span class="token string">'chatRoom2'</span><span class="token punctuation">,</span> userId<span class="token operator">:</span> <span class="token string">'user2'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// chatRoomReducer</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">DELETE_CHAT_ROOM</span><span class="token operator">:</span> <span class="token punctuation">{</span>

      <span class="token keyword">const</span> <span class="token punctuation">{</span> roomId <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span> 
      <span class="token keyword">const</span> <span class="token punctuation">{</span> chatRooms <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>
      <span class="token keyword">delete</span> chatRooms<span class="token punctuation">.</span>byId<span class="token punctuation">[</span>roomId<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// chatRoomUserReducer</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">DELETE_CHAT_ROOM_USER</span><span class="token operator">:</span> <span class="token punctuation">{</span>

      <span class="token keyword">const</span> <span class="token punctuation">{</span> roomId <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span> 
      <span class="token keyword">const</span> <span class="token punctuation">{</span> chatRoomUsers <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>

      <span class="token keyword">const</span> chatRoomUsersIdsToBeDeleted <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>chatRoomUsers<span class="token punctuation">.</span>byId<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> value<span class="token punctuation">.</span>chatRoomId <span class="token operator">===</span> roomId<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> value<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

      chatRoomUsersIdsToBeDeleted<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">chatRoomUserId</span> <span class="token operator">=></span> <span class="token keyword">delete</span> chatRoomUsers<span class="token punctuation">.</span>byId<span class="token punctuation">[</span>chatRoomUserId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now our state structure has become flat and, it has several advantages:-</p>
<ul>
<li>We have to update the slice of the state,
no parsing of an entire state tree.</li>
<li>Lookup has become simple like a dictionary
with a given chatRoomId or userId you can find an element in O(1).</li>
<li>No complex reducers.</li>
<li>Since each entity is separated, an update like changing the name of a Chat room would only require new copies of the “chatRooms > byId > chatRoom” portion of the tree.
It means the fewer portion of the State gets updates which result in fewer re-renders.</li>
</ul>
<p>It is important to normalize the state before it can be included in the state tree
because APIs frequently send back data in a nested form.</p></div></div></div><div class="Post-module--post__footer--3WzWU"><div><p class="Meta-module--meta__date--29eD7">Published <!-- -->20 Sep 2021</p></div><div class="Tags-module--tags--1L_ct"><ul class="Tags-module--tags__list--91FqN"><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/react/">react</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/redux/">redux</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/javascript/">javascript</a></li></ul></div><div class="Author-module--author--2Yefr"><p>Software Craftsman and Functional Programming enthusiast. Exploring GraphQL and React<a class="Author-module--author__bio-twitter--n-O9n" href="https://www.twitter.com/undefined" rel="noopener noreferrer" target="_blank"><strong>Murtaza Bagwala</strong> on Twitter</a></p></div></div><div class="Post-module--post__comments--25y6I"></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/redux-state-normalization";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-0dfd1edc0224713f60bf.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-e8e7fbb006d57d32ed40.js"],"component---src-templates-categories-list-template-js":["/component---src-templates-categories-list-template-js-8e9d064a76608cd132b8.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-a8efe0cdcfb22522b135.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-6822e1c4c80eec5251c4.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-a8ed1f10502a252ab4d2.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-ebfcf73ca0e41d1a319c.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-2078a538ecd479eb4c85.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-eb62a6c14efe68953057.js"],"component---src-templates-tags-list-template-js":["/component---src-templates-tags-list-template-js-ba2b4f0c966d40e8d5a5.js"]};/*]]>*/</script><script src="/component---src-templates-post-template-js-2078a538ecd479eb4c85.js" async=""></script><script src="/643651a62fb35a9bb4f20061cb1f214a352d7976-80fc3dca2e05b06d2460.js" async=""></script><script src="/cd95ea5cbd2c605f26db819f07999610c9ff4310-0415b0ed48b1428b3054.js" async=""></script><script src="/styles-9b6f388623a2ec93d35f.js" async=""></script><script src="/app-0dfd1edc0224713f60bf.js" async=""></script><script src="/532a2f07-0bdce019e7334bf580d8.js" async=""></script><script src="/framework-6e11d4e07218876eea4b.js" async=""></script><script src="/webpack-runtime-bcaa39fce28708816bcb.js" async=""></script></body></html>