{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/dating-app/","result":{"data":{"markdownRemark":{"id":"d364d433-b2d7-52ad-9522-509315e1cfaf","html":"<p>A few years back, I worked on a project in the dating space where we wanted to go beyond random profile suggestions. The idea was simple: when a user selects a mood like Long-Term Relationship, Friend, or Outing, they answer a few short questions. Then, as they browse other profiles, each card would display a compatibility score, showing how well they matched with that person based on their answers.</p>\n<p>That was my first attempt at using logistic regression in a real-world product.</p>\n<h2>What is Logistic Regression</h2>\n<p>Logistic regression is a statistical model that helps you predict a probability - a number between 0 and 1. It’s widely used when you want to answer \"how likely is this to happen?\".</p>\n<p>In this project, I used it to estimate:</p>\n<p>How likely are two people to be compatible, given their answers and preferences?</p>\n<p>The beauty of logistic regression is that it converts a weighted sum of inputs (questions, preferences, etc.) into a clean probability value using a sigmoid curve - the famous \"S-shaped\" function that maps any number into a range between 0 and 1.</p>\n<p><img src=\"/logreg/sig.png\" alt=\"alt\"></p>\n<p>The idea was simple:</p>\n<p>You pick your <strong>mood</strong> - say <em>Long-Term Relationship</em>, <em>Friend</em>, or <em>Outing</em> - and based on that mood, you answer a few questions.\nThen, when another user browses profiles, each card shows a <strong>compatibility score</strong> calculated from how both users answered those mood-based questions.</p>\n<p><img src=\"/logreg/app.png\" alt=\"alt\"></p>\n<p>That’s when I tried to use <strong>logistic regression</strong> to calculate the score.</p>\n<h2>Why Logistic Regression?</h2>\n<p>You might wonder \"Isn't logistic regression just for classification?\" That's true, it's usually used to predict categories like yes/no or match/no match. But here, we're doing something a little different. Logistic regression naturally gives a probability between 0 and 1. Instead of turning it into a simple yes or no, we use that probability as a compatibility score. So when you see a score on a user card, it's essentially the model saying, \"Here's how likely you are to be a good match,\" in a smooth, continuous way.</p>\n<p>This approach lets us go beyond just saying \"match\" or \"no match' and gives a more nuanced view of compatibility.</p>\n<h2>How It Worked</h2>\n<p>For each mood (like <em>Long Term Relationship</em>, <em>Friend</em>, <em>Outing</em>), we had a different set of questions, things like:</p>\n<ul>\n<li><strong>What are you looking for?</strong></li>\n<li><strong>Do you smoke or drink?</strong></li>\n<li><strong>How do you like to spend your weekends?</strong></li>\n<li><strong>What’s your preferred age range?</strong></li>\n</ul>\n<p>Each question had an <strong>odds (weight)</strong> value stored in the database.\nI manually set these odds based on how strongly a question might influence compatibility.\nFor example:</p>\n<ul>\n<li>What are you looking for? <em><strong>Higher (≈1.6–1.7)</strong></em></li>\n<li>Do you smoke or drink? <em><strong>Higher (≈1.6–1.7)</strong></em></li>\n<li>How do you like to spend your weekends? <em><strong>Medium (≈1.4–1.6)</strong></em></li>\n<li>What's your preferred age range? <em><strong>Medium (≈1.4–1.6)</strong></em></li>\n<li>What's your zodiac sign <em><strong>Neutral (1.0)</strong></em></li>\n</ul>\n<h2>Those odds became the backbone of the scoring formula.</h2>\n<h2>The Compatibility Formula</h2>\n<p>For each pair of users:</p>\n<ol>\n<li>Compare their answers for every question.</li>\n<li>Mark it as <code class=\"language-text\">isMatch = 1</code> if both answers align, else <code class=\"language-text\">0</code>.</li>\n<li>Multiply that with the log of the odds(stored in DB) and sum everything up.</li>\n</ol>\n<p>The math behind it:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>z</mi><mo>=</mo><munder><mo>∑</mo><mi>i</mi></munder><mo stretchy=\"false\">(</mo><msub><mtext>isMatch</mtext><mi>i</mi></msub><mo>×</mo><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mtext>odds</mtext><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">z = \\sum_i (\\text{isMatch}_i \\times \\log(\\text{odds}_i))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.3277em;vertical-align:-1.2777em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.05em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2777em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">isMatch</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">odds</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">))</span></span></span></span></span></div>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>score</mtext><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>z</mi></mrow></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\text{score} = \\frac{1}{1 + e^{-z}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord text\"><span class=\"mord\">score</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0908em;vertical-align:-0.7693em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6973em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></div>\n<p>Where:</p>\n<ul>\n<li>isMatch_i = 1 if the answers match, 0 otherwise.</li>\n<li>odds_i = the weight or importance of each question.</li>\n<li>z = combined weighted sum of all matches.</li>\n<li>score = final compatibility probability (0 to 1).</li>\n</ul>\n<p>So, if two users had many matching answers, especially on questions with high odds, their compatibility score leaned closer to 1.</p>\n<h2>A Glimpse from the Code</h2>\n<p>Here’s the main logic that tied everything together:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCompatibilityScore</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user1Id<span class=\"token punctuation\">,</span> user2Id<span class=\"token punctuation\">,</span> moodId</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">profile</span><span class=\"token operator\">:</span> user1<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">questions</span><span class=\"token operator\">:</span> q1 <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">loadCompatibilityData</span><span class=\"token punctuation\">(</span>user1Id<span class=\"token punctuation\">,</span> moodId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">profile</span><span class=\"token operator\">:</span> user2<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">questions</span><span class=\"token operator\">:</span> q2 <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">loadUser2CompatibilityData</span><span class=\"token punctuation\">(</span>user2Id<span class=\"token punctuation\">,</span> moodId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> profileSum <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> partnerSum <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Profile-based matching (age, gender preference)</span>\n  profileSum <span class=\"token operator\">=</span> profileQuestions<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">acc<span class=\"token punctuation\">,</span> question</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> isMatch <span class=\"token operator\">=</span> <span class=\"token function\">isProfileQuestionMatch</span><span class=\"token punctuation\">(</span>question<span class=\"token punctuation\">,</span> user2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> acc <span class=\"token operator\">+</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>isMatch<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>question<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'odds'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Mood question matching (smoking, relationship type, etc.)</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> q1<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> qMatch <span class=\"token operator\">=</span> q2<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">q</span> <span class=\"token operator\">=></span> q<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> q1<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>qMatch<span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> isMatch <span class=\"token operator\">=</span> <span class=\"token function\">isPartnerMatch</span><span class=\"token punctuation\">(</span>q1<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> qMatch<span class=\"token punctuation\">,</span> user2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    partnerSum <span class=\"token operator\">+=</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>isMatch<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q1<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mood_question_compatibilities'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'odds'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Logistic regression formula</span>\n  <span class=\"token keyword\">const</span> score <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">exp</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>partnerSum <span class=\"token operator\">+</span> profileSum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> score<span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Caching was done via Redis for performance, so users could see their compatibility instantly while swiping through cards.</p>\n<h2>Applying What You Learn</h2>\n<p>Back then, I didn't have a lot of user data, so I relied on intuition to set the initial odds in the database. As more users joined, these weights could be fine-tuned or even learned from real match feedback.</p>\n<p>Sometimes the things you learn feel like they'll never be useful and then, one day, it clicks perfectly, and you get a chance to actually implement it in a real product. That moment of connecting theory to practice is incredibly satisfying.</p>\n<p><em>Sometimes, you don’t need deep AI to build something meaningful - just clear logic, good data structure, and a bit of curiosity.</em></p>","fields":{"slug":"/posts/dating-app","tagSlugs":["/tag/ai/","/tag/ml/"]},"frontmatter":{"date":"2025-10-25T09:59:19.000Z","description":"How can a simple statistical model make digital interactions feel personal? In a dating app project I worked on, I used logistic regression to turn user answers into meaningful insights. This blog shares my approach and the lessons I learned along the way.","tags":["AI","ML"],"title":"How I used Logistic Regression to Calculate Compatibility Scores in a Dating App","socialImage":null}}},"pageContext":{"slug":"/posts/dating-app"}},"staticQueryHashes":["2246977889","2727970573","984292147"],"slicesMap":{}}